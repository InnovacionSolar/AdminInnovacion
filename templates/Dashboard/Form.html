{% extends "base.html" %}
{% block content %}
    <section class="overflow-y-scroll bg-gray-200 pb-20 ml-64 p-4 h-full" id="ContentDashboard" >
        <div class="p-4">
            <div class="flex justify-between mb-5 items-center">
                <p class="font-light">
                    Dashboard / <a href="/empleados" class="font-light"> {{url}}</a> / <a href="#" class="font-semibold"> {{sub_url}}</a>
                </p>
                <div class="bg-white border border-gray-300 rounded-lg ">
                    <p class="font-light flex items-center gap-1 text-gray-600 px-2 py-1.5 ">
                        <i class='bx bx-calendar text-xl mr-2'></i>
                        {{hora}}
                    </p>
                </div>
            </div>
            <section class="mb-9 bg-gradient-to-r from-sky-200 to-sky-300 rounded-xl rounded-md ">
                <div class="p-5">
                    <div class="flex items-center gap-2 mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bulb-filled text-yellow-400" width="35" height="35" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z" stroke-width="0" fill="currentColor" /><path d="M12 2a1 1 0 0 1 .993 .883l.007 .117v1a1 1 0 0 1 -1.993 .117l-.007 -.117v-1a1 1 0 0 1 1 -1z" stroke-width="0" fill="currentColor" /><path d="M21 11a1 1 0 0 1 .117 1.993l-.117 .007h-1a1 1 0 0 1 -.117 -1.993l.117 -.007h1z" stroke-width="0" fill="currentColor" /><path d="M4.893 4.893a1 1 0 0 1 1.32 -.083l.094 .083l.7 .7a1 1 0 0 1 -1.32 1.497l-.094 -.083l-.7 -.7a1 1 0 0 1 0 -1.414z" stroke-width="0" fill="currentColor" /><path d="M17.693 4.893a1 1 0 0 1 1.497 1.32l-.083 .094l-.7 .7a1 1 0 0 1 -1.497 -1.32l.083 -.094l.7 -.7z" stroke-width="0" fill="currentColor" /><path d="M14 18a1 1 0 0 1 1 1a3 3 0 0 1 -6 0a1 1 0 0 1 .883 -.993l.117 -.007h4z" stroke-width="0" fill="currentColor" /><path d="M12 6a6 6 0 0 1 3.6 10.8a1 1 0 0 1 -.471 .192l-.129 .008h-6a1 1 0 0 1 -.6 -.2a6 6 0 0 1 3.6 -10.8z" stroke-width="0" fill="currentColor" /></svg>
                        <h2 class="text-2xl text-gray-700 font-semibold">Instrucciones para completar el formulario</h2>
                    </div>
                    <ol class="list-decimal list-inside space-y-1.5 text-sm">
                        <li class="text-gray-900"><strong class="font-semibold">Usuario:</strong> Ingrese un nombre de usuario. Este campo es obligatorio.</li>
                        <li class="text-gray-900"><strong class="font-semibold">Nombres:</strong> Ingrese sus nombres completos. Este campo es obligatorio.</li>
                        <li class="text-gray-900"><strong class="font-semibold">Email:</strong> Ingrese su dirección de correo electrónico. Asegúrese de que su correo electrónico esté activo y sea accesible.</li>
                        <li class="text-gray-900"><strong class="font-semibold">Teléfono:</strong> Ingrese su número de teléfono. Asegúrese de que su número de teléfono sea válido.</li>
                    </ol>
                </div>
            </section>


            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="w-full h-2 bg-gray-200 rounded-full mb-6">
                    <div class="h-full bg-green-500 rounded-full transition-all duration-500" id="progressBar" style="width: 0%;"></div>
                </div>
                <section class="flex w-max gap-24 max-sm:flex-wrap max-sm:gap-10">
                    <div class="flex flex-col gap-2 w-1/2">
                        <h1 class="font-thin text-lg">
                            Datos para el inicio de sesión
                        </h1>
                        {{ form_user.username.label_tag }}
                        {{ form_user.username }}
                        <small class="text-red-500">{{ form_user.username.errors.as_text }}</small>

                        {{ form_user.password1.label_tag }}
                        {{ form_user.password1 }}
                        <small class="text-red-500">{{ form_user.password1.errors.as_text }}</small>

                        {{ form_user.password2.label_tag }}
                        {{ form_user.password2 }}
                        <small class="text-red-500">{{ form_user.password2.errors.as_text }}</small>

                        <label>Nombre:</label>
                        {{ form.nombre }}
                        <small class="text-gray-500">{{ form.nombre.help_text|safe }}</small>

                        <label>Apellido:</label>
                        {{ form.apellido }}
                        <small class="text-gray-500">{{ form.apellido.help_text|safe }}</small>
                    </div>
                    <div class="flex flex-col gap-2 w-1/2">
                        <h1 class="font-thin text-lg">
                            Datos personales
                        </h1>
                            <label>Fecha de Nacimiento:</label>
                            {{ form.fecha_nac }}
                            <small class="text-gray-500">{{ form.fecha_nac.help_text|safe }}</small>

                            
                            <label>Teléfono:</label>
                            {{ form.telefono }}
                            
                            <label>Correo:</label>
                            {{ form.correo }}

                            
                            <label>DNI:</label>
                            {{ form.DNI }}
                    </div>

                    <div class="flex flex-col gap-2 w-1/2">
                        <h1 class="font-thin text-lg mb-2">
                            Detalles laborales
                        </h1>
                        
                        <label>Cargo:</label>
                        <div class="flex items-center gap-3">
                            {{ form.cargo }} 
                            <a href="{% url "Cargos_Home" %}">
                                <i class='bx bx-plus text-xl'></i>
                            </a>
                        </div>
                        
                        <label>Foto de Perfil:</label>
                        {{ form.picture }}

                        <label>Activo:</label>
                        {{ form.active }}
                        <small class="text-gray-500">{{ form.active.help_text|safe }}</small>

                        <label>Fecha de Inicio:</label>
                        {{ form.fecha_inicio }}
                        
                        <label>Departamento:</label>
                        {{ form.departamento }}
                    </div>

                </section>
                <button type="submit" class="relative mt-4 inline-flex items-center justify-start inline-block px-8 py-3 overflow-hidden font-medium transition-all bg-blue-600 rounded-lg hover:bg-white group">
                    <span class="absolute inset-0 border-0 group-hover:border-[25px] ease-linear duration-100 transition-all border-white rounded-full"></span>
                    <span class="relative w-full text-left text-white transition-colors duration-200 ease-in-out group-hover:text-blue-600">
                        Guardar
                    </span>
                </button>
                <a href="{% url 'Empleados' %}" class="relative mt-4 inline-flex items-center justify-start inline-block px-8 py-3 overflow-hidden font-medium transition-all bg-blue-600 rounded-lg hover:bg-white group">
                    <span class="absolute inset-0 border-0 group-hover:border-[25px] ease-linear duration-100 transition-all border-white rounded-full"></span>
                    <span class="relative w-full text-left text-white transition-colors duration-200 ease-in-out group-hover:text-blue-600">
                        Cancelar
                    </span>
                </a> 
            </form>
        </div>
    </section>
{% endblock content %}
{% block script %}
{% if form_error %}
<script>
    Swal.fire({
        icon: 'error',
        title: 'Oops...',
        text: `
            {% for field in form %}
                {% for error in field.errors %}
                    {{ error }}
                {% endfor %}
            {% endfor %}
        `
    });
</script>
{% endif %}
<script>
    function ProgressBar100() {
        Swal.fire({
        icon: 'success',
        title: '¡Formulario completado!',
        text: `
            El formulario esta listo para ser enviado.
        `
    });
    }
    function updateProgressBar(progress) {
        var progressBar = document.getElementById('progressBar');
        progressBar.style.width = progress + '%';
    }
    var formFields = document.querySelectorAll('input, select, textarea');

    formFields.forEach(function(field, index) {
        field.addEventListener('input', function() {
            var completedFields = Array.from(formFields).filter(field => field.value !== '').length;
            var progress = completedFields / formFields.length * 100;

            var progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';

            if (progress === 100) {
                ProgressBar100();
            }
        });
    });
</script>
{% endblock script %}